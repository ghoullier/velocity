!function e(t,n,o){function i(a,s){if(!n[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(r)return r(a,!0);throw new Error("Cannot find module '"+a+"'")}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){var n=t[a][1][e];return i(n?n:e)},l,l.exports,e,t,n,o)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<o.length;a++)i(o[a]);return i}({1:[function(e){"use strict";e("./modules/common/module"),e("./modules/data/module"),e("./modules/view-data/module"),e("./modules/view/module")},{"./modules/common/module":3,"./modules/data/module":10,"./modules/view-data/module":13,"./modules/view/module":22}],2:[function(e,t){"use strict";function n(e){function t(t){e.log(t.name)}return{trace:t}}n.$inject=["$log"],t.exports=n},{}],3:[function(e,t){"use strict";var n=e("./provider/cache-storage"),o=e("./service/geolocation"),i=e("./factory/tracer");t.exports=angular.module("velocity.common",[]).provider("CacheStorage",n).service("Geolocation",o).factory("Tracer",i)},{"./factory/tracer":2,"./provider/cache-storage":4,"./service/geolocation":5}],4:[function(e,t){"use strict";function n(){var e=null;this.setStrategy=function(t){e=t},this.$get=function(t,n){function o(){c||(c=!0,t(function(){e.setItem(r,JSON.stringify(a)),c=!1},0))}function i(e){var t=e in a?a[e]:{},n=angular.extend({},{id:e});a[e]=t;var i={put:function(e,n){return t[e]=n,o(),n},get:function(e){return t[e]},remove:function(e){delete t[e],o()},removeAll:function(){t={},o()},destroy:function(){t=null,n=null,delete s[e],delete a[e],o()},info:function(){return angular.extend({},n)}};return s[e]=i,i}null===e&&this.setStrategy(n.localStorage);var r="ng:storage",a=e.getItem(r)?JSON.parse(e.getItem(r)):{},s={},c=!1;return i.info=function(){var e={};return angular.forEach(s,function(t,n){e[n]=t.info()}),e},i.get=function(e){return s[e]},i},this.$get.$inject=["$timeout","$window"]}t.exports=n},{}],5:[function(e,t){"use strict";function n(e,t){this.getCurrentPosition=function(){var n=e.defer();return t.navigator.geolocation.getCurrentPosition(n.resolve,n.reject),n.promise}}n.$inject=["$q","$window"],t.exports=n},{}],6:[function(e,t){"use strict";function n(e,t){var n=e.$get();t.setStrategy(n.sessionStorage)}n.$inject=["$windowProvider","CacheStorageProvider"],t.exports=n},{}],7:[function(e,t){"use strict";t.exports={url:"http://data.keolis-rennes.com/json/",version:"2.0",key:"618UNE6MRZ1E43L"}},{}],8:[function(e,t){"use strict";function n(e,t,n){function o(e,t){var n=angular.extend({},i,{cmd:e});return angular.forEach(t,function(e,t){n["param["+t+"]"]=e}),n}var i={version:n.version,key:n.key};return function(i,r){return e({url:n.url,method:"GET",params:o(i,r),cache:t})}}n.$inject=["$http","HttpCache","OpenDataApi"],t.exports=n},{}],9:[function(e,t){"use strict";function n(e){var t=e;return t("velocity:http-cache")}n.$inject=["CacheStorage"],t.exports=n},{}],10:[function(e,t){"use strict";var n=e("./config/cache"),o=e("./constant/api"),i=e("./factory/http-cache"),r=e("./factory/api-request"),a=e("./service/bike-stations"),s=e("./service/lines");t.exports=angular.module("velocity.data",["ngResource","velocity.common"]).config(n).constant("OpenDataApi",o).factory("HttpCache",i).factory("ApiRequest",r).service("BikeStationsData",a).service("LinesData",s)},{"./config/cache":6,"./constant/api":7,"./factory/api-request":8,"./factory/http-cache":9,"./service/bike-stations":11,"./service/lines":12}],11:[function(e,t){"use strict";function n(e){this.getBikeStations=function(){return e("getbikestations")}}n.$inject=["ApiRequest"],t.exports=n},{}],12:[function(e,t){"use strict";function n(e){this.getLines=function(){return e("getlines",{size:100})}}n.$inject=["ApiRequest"],t.exports=n},{}],13:[function(e,t){"use strict";var n=e("./service/bike-stations"),o=e("./service/lines");t.exports=angular.module("velocity.view-data",["velocity.data"]).service("BikeStationsViewData",n).service("LinesViewData",o)},{"./service/bike-stations":14,"./service/lines":15}],14:[function(e,t){"use strict";function n(e){return parseInt(e,10)}function o(e,t){this.getBikeStations=function(){function o(e){var t=e.data.opendata.answer.data.station;t=t.map(function(e){return{id:e.number,latitude:e.latitude,longitude:e.longitude,name:e.name,totalslots:n(e.slotsavailable)+n(e.bikesavailable),slotsavailable:n(e.slotsavailable),bikesavailable:n(e.bikesavailable),district:e.district}}),i.resolve(t)}var i=e.defer();return t.getBikeStations().then(o,i.reject),i.promise},this.getBikeStationById=function(t){function n(e){e.forEach(function(e){t===e.id&&o.resolve(e)})}var o=e.defer();return this.getBikeStations().then(n,o.reject),o.promise}}o.$inject=["$q","BikeStationsData"],t.exports=o},{}],15:[function(e,t){"use strict";function n(e,t){this.getLines=function(){function n(e){o.resolve(e.data.opendata.answer.data)}var o=e.defer();return t.getLines().then(n,o.reject),o.promise},this.getLinesById=function(t){function n(e){e.forEach(function(e){t===e.id&&o.resolve(e)})}var o=e.defer();return this.getBikeStations().then(n,o.reject),o.promise}}n.$inject=["$q","LinesData"],t.exports=n},{}],16:[function(e,t){"use strict";function n(e,t){e.when("/welcome",{templateUrl:"views/welcome.html",controller:"WelcomeController as ctrl"}).when("/bike-stations",{templateUrl:"views/bike-stations.html",controller:"BikeStationsController as ctrl"}).when("/bike-stations/:id",{templateUrl:"views/bike-station-detail.html",controller:"BikeStationDetailController as ctrl"}).when("/lines",{templateUrl:"views/lines.html",controller:"LinesController as ctrl"}).otherwise({redirectTo:"/welcome"}),t.html5Mode(!1)}n.$inject=["$routeProvider","$locationProvider"],t.exports=n},{}],17:[function(e,t){"use strict";function n(e,t,n,o){function i(){o.getCurrentPosition().then(function(t){var n=t.coords,o=new google.maps.LatLng(n.latitude,n.longitude);e.map.setCenter(o),e.markers.push(new google.maps.Marker({map:e.map,position:o,icon:"https://maps.gstatic.com/mapfiles/ms2/micons/blue-dot.png"}))})}e.station={},e.map={},e.options={zoom:15,mapTypeId:google.maps.MapTypeId.ROADMAP},e.markers=[],n.getBikeStationById(t.id).then(function(t){var n=new google.maps.LatLng(t.latitude,t.longitude);e.station=t,e.map.panTo(n),e.markers.push(new google.maps.Marker({map:e.map,position:n,icon:"https://maps.gstatic.com/mapfiles/ms2/micons/red-dot.png"}))}),this.geolocalize=i}n.$inject=["$scope","$routeParams","BikeStationsViewData","Geolocation"],t.exports=n},{}],18:[function(e,t){"use strict";function n(e,t){e.stations=[],t.getBikeStations().then(function(t){e.stations=t})}n.$inject=["$scope","BikeStationsViewData"],t.exports=n},{}],19:[function(e,t){"use strict";function n(e,t){e.lines=[],e.baseUrl="",t.getLines().then(function(t){e.baseUrl=t.baseurl,e.lines=t.line})}n.$inject=["$scope","LinesViewData"],t.exports=n},{}],20:[function(e,t){"use strict";function n(e){e.links=[]}n.$inject=["$scope"],t.exports=n},{}],21:[function(e,t){"use strict";function n(e){e.appVersion=o.version}var o=e("../../../../../package");n.$inject=["$scope"],t.exports=n},{"../../../../../package":23}],22:[function(e,t){"use strict";var n=e("./config/route"),o=e("./controller/navigation"),i=e("./controller/welcome"),r=e("./controller/bike-stations"),a=e("./controller/bike-station-detail"),s=e("./controller/lines");t.exports=angular.module("velocity.view",["ngRoute","ngTouch","ui.map","velocity.common","velocity.view-data"]).config(n).controller("NavigationController",o).controller("WelcomeController",i).controller("BikeStationsController",r).controller("BikeStationDetailController",a).controller("LinesController",s)},{"./config/route":16,"./controller/bike-station-detail":17,"./controller/bike-stations":18,"./controller/lines":19,"./controller/navigation":20,"./controller/welcome":21}],23:[function(e,t){t.exports={name:"velocity",version:"0.0.3",repository:{type:"git",url:"https://github.com/ghoullier/velocity.git"},scripts:{postinstall:"bower install",postupdate:"bower update",start:"gulp"},devDependencies:{bower:"~1.3.9",browserify:"~3.46.0","connect-livereload":"~0.4.0",express:"~4.1.1",gulp:"~3.8.6","gulp-angular-templatecache":"^1.3.0","gulp-autoprefixer":"0.0.7","gulp-browserify":"~0.5.0","gulp-concat":"~2.2.0","gulp-embedlr":"~0.5.2","gulp-gh-pages":"^0.3.3","gulp-htmlmin":"^0.2.0","gulp-jshint":"~1.5.5","gulp-livereload":"~1.3.1","gulp-ng-annotate":"^0.2.0","gulp-plumber":"^0.6.5","gulp-sass":"~0.7.1","gulp-uglify":"^0.3.1","gulp-util":"~2.2.14",minimist:"^1.1.0","tiny-lr":"0.0.7"},engines:{node:">=0.10.0"},license:"MIT"}},{}]},{},[1]);